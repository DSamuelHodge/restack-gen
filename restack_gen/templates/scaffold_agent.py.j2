"""
{{ agent_name }} - Handles processing and state management.
"""
# @generated by restack-gen
from restack_ai.agent import Agent, agentmethod
from {{ project_name }}.common.settings import settings
from {{ project_name }}.common.{{ import_model_module }} import {{ event_type }}


class {{ agent_name }}(Agent):
    """
    Agent responsible for processing tasks using {{ event_type }} structure.
    """
    
    # 1. Configuration
    name = "{{ module_name }}"
    task_queue = settings.task_queue
    
    # 2. Handlers
    @agentmethod()
    async def process_task(self, event: {{ event_type }}) -> {{ event_type }}:
        """Initial task processing handler."""
        self.log.info("process_task", request_id=event.request_id)
        
        # Update status
        event.status = "In Progress"
        self.log.debug("state_updated", state=event.model_dump())
        
        # --- ADD YOUR CORE LOGIC HERE ---
        
        # Example: Log completion
        event.status = "Completed"
        self.log.info("task_completed", request_id=event.request_id)
        
        return event
