# @generated by restack-gen v{{ generator_version }} ({{ timestamp }})
# command: {{ command }}
"""Client script to run {{ workflow_name }} workflow."""

import asyncio
from restack_ai import Restack

from {{ project_name }}.workflows.{{ workflow_module }} import {{ workflow_name }}{% if has_input %}, {{ workflow_name }}Input{% endif %}


async def main() -> None:
    """Run {{ workflow_name }} workflow."""
    client = Restack()

    {% if has_input -%}
    # Create input
    input_data = {{ workflow_name }}Input(
        # TODO: Set input fields
    )
    {% else -%}
    input_data = None
    {%- endif %}

    # Run workflow
    workflow_id = "{{ workflow_id }}"
    run_id = await client.schedule_workflow(
        workflow={{ workflow_name }},
        workflow_id=workflow_id,
        input=input_data,
        task_queue="{{ task_queue }}",
    )

    print(f"Started {{ workflow_name }}: workflow_id={workflow_id}, run_id={run_id}")

    # Wait for result
    result = await client.get_workflow_result(
        workflow_id=workflow_id,
        run_id=run_id,
    )

    print(f"{{ workflow_name }} result: {result}")


if __name__ == "__main__":
    asyncio.run(main())
