# @generated by restack-gen v1.0.0 (2025-10-26T04:27:12.193748+00:00)
# command: restack new testdemo

.PHONY: help setup install install-dev fmt lint typecheck test test-fast test-cov test-integration clean run

help:
	@echo "testdemo - Makefile commands"
	@echo ""
	@echo "  setup          - Install uv (if needed) and setup environment"
	@echo "  install        - Install dependencies"
	@echo "  install-dev    - Install with dev dependencies"
	@echo "  fmt            - Format code with ruff and black"
	@echo "  lint           - Lint code with ruff"
	@echo "  typecheck      - Type check with mypy"
	@echo "  test           - Run all tests"
	@echo "  test-fast      - Run fast tests only"
	@echo "  test-cov       - Run tests with coverage"
	@echo "  test-integration - Run integration tests"
	@echo "  clean          - Remove generated files"
	@echo "  run            - Start the Restack service"

setup:
	pip install -e ".[dev]"

install:
	pip install -e .

install-dev:
	pip install -e ".[dev]"

fmt:
	ruff check --fix .
	black .

lint:
	ruff check .

typecheck:
	mypy src/testdemo

test:
	pytest -v

test-fast:
	pytest -v -m "not slow and not integration"

test-cov:
	pytest -v --cov --cov-report=term-missing --cov-report=html

test-integration:
	pytest -v -m integration

clean:
	rm -rf build/ dist/ *.egg-info .pytest_cache .coverage htmlcov/ .mypy_cache .ruff_cache
	find . -type d -name __pycache__ -exec rm -rf {} +
	find . -type f -name "*.pyc" -delete

run:
	python server/service.py
